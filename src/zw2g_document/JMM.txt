happens-before规则和as-if-serial语义

1:happens-before
    核心原则:保证数据内存的可见性，一个操作的执行结果要对另一个结果可见

    四种实现该原则的规则
        1程序顺序规则(不理解)
        2监视器锁规则：对一个监视器的解锁，hb于对一个监视器的加锁
        3volatile：对该变量的写hb于该变量的读

    方法手段
        四大内存屏障：执行前必须保证数据的内存可见性



2:as-if-serial
核心原则:保证程序的执行结果不能被改变，编译器不能对有数据依赖的操作做重排序